################################################################################
Контракты с подписью
################################################################################

При формировании транзакции с контрактом, мы всегда имеем подпись отправившего лица. Эта подпись автоматически поверяется при разборе транзакции. Кроме этого, имеются функция **CallContract** и возможность вызова контракта в виде **ContractName(parameters)**. Разберем такую ситуацию, пусть имеется контракт перевода денег *send_money*.

.. code:: js

  contract send_money {
      data {
        Recipient int
        Amount    money
      }
      ...
  }
  
Если мы в каком-то контракте вызовем его как *send_money("Recipient,Amount", 12345, 777)*, то у нас будет осуществлен перевод 777 монет на кошелек 12345. Проблема в том, что пользователь подписывающий первичный контракт мог быть вообще не курсе, что с него будут списаны деньги. Предположим, мы хотим сделать так, чтобы контракт send_money требовал дополнительной подписи пользователя при вызове из других контрактов. Что для этого нужно сделать?

1. Нужно добавить в *send_money* поле с именем **Signature** и опциями *optional* и *hidden*. Эти опции позволят не требовать дополнительной подписи при вызове контракта напрямую, так как там уже будет подпись.

.. code:: js

  contract send_money {
      data {
        Recipient int
        Amount    money
        Signature string "optional hidden"
      }
      ...
  }
  
2. Нужно добавить в таблицу **Signatures** запись с именем нашего контракта *send_money*. Также там мы указываем текст, который будет показываться при подтверждении и указываем пары значений. В качестве параметра указываем имена полей, значения которыx будут показываться пользователю, а в качестве текста указываем понятное имя для данного параметра. Необязательно добавлять туда все поля, которые есть в контракте, но в нашем случае у нас всего два важных поля, поэтому укажем оба. Например, мы можем указать следующее:

**Title**: Are you agree to send money this recipient?
**Parameter**: Receipient       **Text**: Wallet ID
**Parameter**: Amount           **Text**: Amount (qEGS)




